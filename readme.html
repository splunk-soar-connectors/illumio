<!-- File: readme.html

    Copyright (c) 2022 Illumio.

    This unpublished material is proprietary to Illumio.
    All rights reserved. The methods and
    techniques described herein are considered trade secrets
    and/or confidential. Reproduction or distribution, in whole
    or in part, is forbidden except by express written permission
    of Illumio.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software distributed under
    the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
    either express or implied. See the License for the specific language governing permissions
    and limitations under the License.
-->
<html>

<body>
    <p>
        It is recommended to read the documentation for the app to understand the functioning of the actions and the
        asset configuration or the action parameters associated with it. For further details, refer to <a
            href='https://docs.illumio.com/core/21.5/API-Reference/index.html#Illumio-Core' target="_blank">Illumio
            Docs</a>.
    </p>
    <h2>SDK Details</h2>
    <p>
        The app uses SDK for communicating with the Illumio server. Below is the SDK version used
        by the Splunk SOAR Connector.
    <table>
        <tr>
            <th>SDK NAME</th>
            <th>VERSION</th>
        </tr>
        <tr>
            <td>illumio</td>
            <td>1.1.0</td>
        </tr>
    </table>
    </p>
    <p>
    <h2>Steps to Configure the Illumio Phantom app's asset</h2>
    <p>
        Follow these steps to create an asset for the app in Phantom Platform:
    <ul>
        <li>Log in to the Illumio Policy Compute Engine.</li>
        <ul>
            <li>Once logged in, user's name is shown on top-right corner with dropdown where you find <b>My API Keys</b>
                option.</li>
            <li>Please select the <b>My API Keys</b> option.</li>
            <li>Click on <b>Add</b> button on top-left corner, a dialog box will be shown which accepts name and
                description.</b></li>
            <li>Enter unique name for your API key and click on <b>create</b> button to create new API key.</li>
            <li>On successfully creating a new API key, another dialog box will be shown containing the <b>Key
                    ID</b> and <b>Secret</b>.</li>
            <li>Copy the <b>Secret</b> value from the dialog box and paste it into any text editor as backup, as it
                won't
                be visible again. Once copied, click on Close.</li>
            <li>This secret value is the <b>API Secret</b> and <b>Authentication Username</b> value is the <b>API
                    Key</b> that will be used in the asset.</li>
            <li>Also store the Base URL and port from the URL.</li>
            <li>Double click on the selected API key to get the Org ID</li>
        </ul>
        <li>Log in to your Phantom platform.</li>
        <ul>
            <li>Navigate to the <b>Home</b> dropdown and select <b>Apps</b>.</li>
            <li>Search the Illumio App from the search box.</li>
            <li>Click on the <b>CONFIGURE NEW ASSET</b> button.</li>
            <li>Navigate to the <b>Asset Info</b> tab and enter the Asset name and Asset description.</li>
            <li>Navigate to the <b>Asset Settings</b> tab.</li>
            <li>Paste the <b>API Key, API Secret, Hostname, Port, and Org ID</b> from Illumio to its respective
                configuration parameter.</li>
            <li>Save the asset.</li>
            <li>Now, test the connectivity of the Phantom server to the Illumio instance by clicking on the <b>TEST
                    CONNECTIVITY</b> button.</li>
        </ul>
    </ul>
    </p>
    <h2>Explanation of the Asset Configuration Parameters</h2>
    The asset configuration parameters affect 'test connectivity' and some other actions of the application. The
    parameters related to test connectivity action are Illumio API Key, API Secret, Hostname, Port and Org ID.
    <ul>
        <li>
            <b>API Key: </b> The API Key Username for the key created in the previous steps.
        </li>
        <li>
            <b>API Secret</A>: </b> API Secret for asset authorization.
        </li>
        <li>
            <b>Hostname</A>: </b> Name of host where PCE is hosted.
        </li>
        <li>
            <b>Port</A>: </b> Port number where PCE is hosted.
        </li>
        <li>
            <b>Org ID</A>: </b> ID number of organization in PCE.
        </li>
    </ul>
    </p>
    <p>
    <h2>Explanation of the Illumio Actions' Parameters</h2>
    <ul>
        <li>
            <h3>Test Connectivity (Action Workflow Details)</h3>
            <ul>
                <li> This action will test the connectivity of the Phantom server to the Illumio instance by using the
                    provided asset configuration parameters. </li>
                <li> The action validates the provided asset configuration parameters. Based on the response from the
                    SDK method, the appropriate success and failure message will be displayed when the
                    action gets executed.</li>
            </ul>
        </li>
        <li>
            <h3>Get Traffic Analysis</h3>
            Runs an explorer query to get a traffic analysis report based on the provided inputs. The query checks all
            sources and destinations for traffic on a given port.
            <ul>
                <li><b>Action Parameter: Start Time</b></li>
                <ul>
                    <li>This parameter will accept the start datetime for a traffic. An error message will be
                        shown if the datetime is invalid. Start time support human readable or ISO datetime values.</li>
                </ul>
                <li><b>Action Parameter: End Time</b></li>
                <ul>
                    <li>This parameter will accept the end datetime for a traffic. An error message will be
                        shown if the datetime is invalid. End time support human readable or ISO datetime values.</li>
                </ul>
                <li><b>Action Parameter: Port</b></li>
                <ul>
                    <li>This parameter will accept the port value for a traffic. It expects a numeric value as an
                        input. An error message will be shown if the port value is invalid.</li>
                </ul>
                <li><b>Action Parameter: Protocol</b></li>
                <ul>
                    <li>This parameter allows the user to select TCP or UDP as protocol for traffic. The default value
                        is TCP.</li>
                </ul>
                <li><b>Action Parameter: Policy Decisions</b></li>
                <ul>
                    <li>This parameter is used to filter out the traffic based on policy decisions. An error message
                        will be shown if the policy decision is invalid.</li>
                </ul>
                <li><b>Examples:</b>
                    <ul>
                        <li>Retrieve traffic for between 01 July, 2022 to 10 July, 2022 on 22 TCP and having policy
                            decision potentially_blocked.
                            <ul>
                                <li>Start Time = "2022-07-01T17:45:08" </li>
                                <li>End Time = "2022-07-10T17:45:08"</li>
                                <li>Port = 22</li>
                                <li>Protocol = "TCP"</li>
                                <li>Policy Decisions = "potentially_blocked"</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <h3>Create Virtual Service</h3>
            Creates a virtual service.
            <ul>
                <li><b>Action Parameter: Port</b></li>
                <ul>
                    <li>This parameter will accept the port value for a virtual service. It expects a numeric value as
                        an input. An error message will be shown if the port value is invalid.</li>
                </ul>
                <li><b>Action Parameter: Protocol</b></li>
                <ul>
                    <li>This parameter allows the user to select TCP or UDP from dropdown as protocol for virtual
                        service</li>
                </ul>
                <li><b>Action Parameter: Name</b></li>
                <ul>
                    <li>This parameter will accept the name for a virtual service.</li>
                </ul>
                <li><b>Examples:</b>
                    <ul>
                        <li>Create new virtual service with name "test-vs" on port 22 and protocol "TCP".
                            <ul>
                                <li>Port = 22</li>
                                <li>Protocol = "TCP"</li>
                                <li>Name = "test-vs"</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <h3>Create Service Binding</h3>
            <p>
                Binds one or more workloads to virtual service. The virtual service must be provisioned into active
                state
                to bind a workload to it.
            </p>

            <ul>
                <li><b>Action Parameter: Workload hrefs</b></li>
                <ul>
                    <li>
                        This parameter will accept the href of workload for a getting bind to virtual service. It
                        accepts comma seperated workload hrefs. An error message will be shown if the href value is
                        invalid.
                    </li>
                </ul>
                <li><b>Action Parameter: Virtual Service href</b></li>
                <ul>
                    <li>
                        This parameter will accept the href of virtual service for binding. An error message will be
                        shown if the href value is invalid.
                    </li>
                </ul>
                <li><b>Examples:</b>
                    <ul>
                        <li>
                            Bind workloads
                            "/orgs/1/workloads/abd71956-0953-4a3f-b7f7-9aecaebbc358,/orgs/1/workloads/6ee0434b-46a8-48e3-b813-bdde9ccb1c"
                            to virtual service
                            "/orgs/1/sec_policy/active/virtual_services/ce3387fd-703a-4068-a3d2-6e71d63068f"
                        </li>.
                        <ul>
                            <li>Workload hrefs =
                                "/orgs/1/workloads/abd71956-0953-4a3f-b7f7-9aecaebbc358,/orgs/1/workloads/6ee0434b-46a8-48e3-b813-bdde9ccb1c"
                            </li>
                            <li>Virtual Service href =
                                "/orgs/1/sec_policy/active/virtual_services/ce3387fd-703a-4068-a3d2-6e71d63068f"
                            </li>
                        </ul>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <h3>Get IP Lists</h3>
            Gets list of IP list objects.
            <ul>
                <li><b>Action Parameter: name</b></li>
                <ul>
                    <li>This parameter will accept name of ip list.</li>
                </ul>
                <li><b>Action Parameter: description</b></li>
                <ul>
                    <li>This parameter will accept description of ip list.</li>
                </ul>
                <li><b>Action Parameter: fqdn</b></li>
                <ul>
                    <li>This parameter will accept the fqdn value of ip list.</li>
                </ul>
                <li><b>Action Parameter: ip_address</b></li>
                <ul>
                    <li>This parameter will accept the ip address value attached to ip list.</li>
                </ul>
                <li><b>Examples:</b>
                    <ul>
                        <li>Retrive IP Lists with ip address as 1.1.1.1, name as "iplist1", description as "test iplist"
                            and fqdn as "www.illumio.com".</li>
                        <ul>
                            <li>name="iplist1"</li>
                            <li>description = "test iplist"</li>
                            <li>fqdn = "www.illumio.com"</li>
                            <li>ip_address = "1.1.1.1"</li>
                        </ul>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <h3>Create Ruleset</h3>
            Creates a ruleset security policy object.
            <ul>
                <li><b>Action Parameter: name</b></li>
                <ul>
                    <li>This parameter will accept name for creating new ruleset.</li>
                </ul>
                <li><b>Examples:</b>
                    <ul>
                        <li>Create new ruleset with name "test-rs"</li>
                        <ul>
                            <li>name="test-rs"</li>
                        </ul>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <h3>Create Rule</h3>
            Creates a policy rule within a given ruleset.
            <ul>
                <li><b>Action Parameter: consumer</b></li>
                <ul>
                    <li>This parameter will accept href of consumers for creating new rule.</li>
                </ul>
                <li><b>Action Parameter: provider</b></li>
                <ul>
                    <li>This parameter will accept href of providers for creating new rule.</li>
                </ul>
                <li><b>Action Parameter: ruleset_href</b></li>
                <ul>
                    <li>This parameter will accept href of parent ruleset for creating new rule.</li>
                </ul>
                <li><b>Action Parameter: resolve_consumers_as</b></li>
                <ul>
                    <li>This parameter will accept value for consumer to resolve rule.</li>
                </ul>
                <li><b>Action Parameter: resolve_providers_as</b></li>
                <ul>
                    <li>This parameter will accept value for provider to resolve rule.</li>
                </ul>
                <li><b>Examples:</b>
                    <ul>
                        <li>Create new rule with provider as
                            "/orgs/1/sec_policy/draft/virtual_services/ce3387fd-703a-4068-a3d2-6e71d63068f4", consumer
                            as
                            "/orgs/1/sec_policy/active/ip_lists/958", ruleset as
                            "/orgs/1/sec_policy/draft/rule_sets/1611", resolve_consumers_as "workloads",
                            resolve_providers_as "virtual_services"
                        </li>
                        <ul>
                            <li>consumer="/orgs/1/sec_policy/active/ip_lists/958"</li>
                            <li>provider="/orgs/1/sec_policy/draft/virtual_services/ce3387fd-703a-4068-a3d2-6e71d63068f4"
                            </li>
                            <li>ruleset_href="/orgs/1/sec_policy/draft/rule_sets/1611"</li>
                            <li>resolve_providers_as="virtual_services"</li>
                            <li>resolve_consumers_as="workloads"</li>
                        </ul>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <h3>Create Enforcement Boundary</h3>
            Creates an enforcement boundary with an ingress service using the given port/protocol.
            <ul>
                <li><b>Action Parameter: consumer</b></li>
                <ul>
                    <li>This parameter will accept href of consumers for creating new enforcement boundary.</li>
                </ul>
                <li><b>Action Parameter: provider</b></li>
                <ul>
                    <li>This parameter will accept href of providers for creating new enforcement boundary.</li>
                </ul>
                <li><b>Action Parameter: name</b></li>
                <ul>
                    <li>This parameter will accept name value for creating new enforcement boundary.</li>
                </ul>
                <li><b>Action Parameter: port</b></li>
                <ul>
                    <li>This parameter will accept the port value for a virtual service. It expects a numeric value as
                        an input. An error message will be shown if the port value is invalid.</li>
                </ul>
                <li><b>Action Parameter: protocol</b></li>
                <ul>
                    <li>This parameter allows the user to select TCP or UDP from dropdown as protocol for virtual
                        service</li>
                </ul>
                <li><b>Examples:</b>
                    <ul>
                        <li>Create new rule with provider as
                            all workloads, consumer as
                            "/orgs/1/sec_policy/active/ip_lists/958", name as "test-eb"
                        </li>
                        <ul>
                            <li>consumer="/orgs/1/sec_policy/active/ip_lists/958"</li>
                            <li>provider="ams" (NOTE: where "ams" represents all workloads)</li>
                            <li>name="test-eb"</li>
                            <li>port=22</li>
                            <li>protocol="TCP"</li>
                        </ul>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <h3>Update Enforcement Mode</h3>
            Updates the enforcement mode for one or more workloads.
            <ul>
                <li><b>Action Parameter: workload_hrefs</b></li>
                <ul>
                    <li>This parameter will accept list of workload href for updating enforcement mode.</li>
                </ul>
                <li><b>Examples:</b>
                    <ul>
                        <li>Update enforcement mode of workload "/orgs/1/workloads/bd004cd5-f37c-4823-9ec9-cb1773dd11fc"
                        </li>
                        <ul>
                            <li>consumer="/orgs/1/workloads/bd004cd5-f37c-4823-9ec9-cb1773dd11fc"</li>
                        </ul>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <h3>Provision Objects</h3>
            Provision draft policy changes for the given security policy objects.
            <ul>
                <li><b>Action Parameter: hrefs</b></li>
                <ul>
                    <li>This parameter will accept list of href for provisioning.</li>
                </ul>
                <li><b>Examples:</b>
                    <ul>
                        <li>Provision virtual service
                            "/orgs/1/sec_policy/draft/virtual_services/ce3387fd-703a-4068-a3d2-6e71d63068f4"
                        </li>
                        <ul>
                            <li>hrefs="/orgs/1/sec_policy/draft/virtual_services/ce3387fd-703a-4068-a3d2-6e71d63068f4"
                            </li>
                        </ul>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <h3>Get Workloads</h3>
            Gets multiple workloads based on the given search criteria.
            <ul>
                <li><b>Action Parameter: enforcement_mode</b></li>
                <ul>
                    <li>This parameter will allow the user to select enforcement mode for workload.</li>
                </ul>
                <li><b>Action Parameter: connectivity</b></li>
                <ul>
                    <li>This parameter will allow the user to select connectivity for workload.</li>
                </ul>
                <li><b>Action Parameter: name</b></li>
                <ul>
                    <li>This parameter will accept name value for workload.</li>
                </ul>
                <li><b>Action Parameter: labels</b></li>
                <ul>
                    <li>This parameter will accept list of labels for workload.</li>
                </ul>
                <li><b>Action Parameter: ip_address</b></li>
                <ul>
                    <li>This parameter will accept ip address value for workload.</li>
                </ul>
                <li><b>Action Parameter: description</b></li>
                <ul>
                    <li>This parameter will accept description for workload.</li>
                </ul>
                <li><b>Action Parameter: hostname</b></li>
                <ul>
                    <li>This parameter will accept hostname value for workload.</li>
                </ul>
                <li><b>Action Parameter: os_id</b></li>
                <ul>
                    <li>This parameter will accept os_id for workload.</li>
                </ul>
                <li><b>Examples:</b>
                    <ul>
                        <li>Fetch list of workload with name as "test", enforcement_mode "visibility_only", connectivity
                            "online", labels "/orgs/1/labels/27380", ip_address "1.1.1.1", description "test workload",
                            hostname "Perf_test 16608" and os_id "ubuntu-x86_64-xenial"</li>
                        <ul>
                            <li>enforcement_mode="visibility_only"</li>
                            <li>connectivity="online</li>
                            <li>name="test"</li>
                            <li>labels="/orgs/1/labels/27380"</li>
                            <li>ip_address="1.1.1.1"</li>
                            <li>description="test workload"</li>
                            <li>hostname="centos7"</li>
                            <li>os_id="ubuntu-x86_64-xenial"</li>
                        </ul>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    </li>